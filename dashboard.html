<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard - QUARTRIX</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="navbar">
  <span id="roleText"></span>
  <button onclick="logout()">Logout</button>
</div>

<div class="dashboard">
  <h1>Dashboard QUARTRIX</h1>
  <p id="info"></p>

  <div class="menu">
    <a href="siswa.html">ðŸ“˜ Daftar Siswa</a>
    <a href="jadwal.html">ðŸ“… Jadwal</a>
    <a href="foto.html">ðŸ“¸ Foto</a>
  </div>

  <!-- ADMIN ONLY -->
  <div id="adminPanel" class="hidden">
    <h2 style="margin-top:30px;color:#3e2c23;">Tambah Siswa</h2>

    <input id="nama" placeholder="Nama siswa">
    <input id="foto" placeholder="Link foto">
    <button onclick="tambahSiswa()">Tambah</button>
  </div>
</div>

<script>
<script>
/* ===============================
   CEK LOGIN
================================ */
const role = localStorage.getItem("role");
const namaLogin = localStorage.getItem("nama");
const absenLogin = localStorage.getItem("absen");

if (!role || !namaLogin || !absenLogin) {
  window.location.href = "login.html";
}

/* ===============================
   ELEMENT
================================ */
const info = document.getElementById("info");
const adminPanel = document.getElementById("adminPanel");
const siswaList = document.getElementById("siswaList");

/* ===============================
   DATA SISWA (DEFAULT)
================================ */
let siswaData = JSON.parse(localStorage.getItem("siswaData")) || [
  { nama: "AGUSTINE DYAH AYU RAHMADANI", absen: 1 },
  { nama: "AHMAD FAISHAL ZAUMAR", absen: 2 },
  { nama: "ALANA GEIZEL FAEDAH ALAM", absen: 3 },
  { nama: "ALYA NAFEEZA AZZAHRO", absen: 4 },
  { nama: "ANNISA PRIMADITA MUSAFA", absen: 5 },
  { nama: "ARYA ISSYA MAHENDRA", absen: 6 },
  { nama: "BERLIANA FAIRUZ IZDIHAR", absen: 7 }
];

/* ===============================
   TAMPILKAN INFO USER
================================ */
if (role === "admin") {
  info.innerText = "Login sebagai ADMIN";
  adminPanel.style.display = "block";
} else {
  info.innerText =
    "Selamat datang, " +
    namaLogin +
    " (Absen " +
    absenLogin +
    ")";
}

/* ===============================
   RENDER SISWA
================================ */
function renderSiswa() {
  siswaList.innerHTML = "";

  siswaData.sort((a, b) => a.absen - b.absen);

  siswaData.forEach((s) => {
    const li = document.createElement("li");
    li.innerText = "Absen " + s.absen + " - " + s.nama;
    siswaList.appendChild(li);
  });

  localStorage.setItem("siswaData", JSON.stringify(siswaData));
}

renderSiswa();

/* ===============================
   TAMBAH SISWA (ADMIN)
================================ */
function tambahSiswa() {
  const nama = document.getElementById("namaBaru").value.trim();
  const absen = document.getElementById("absenBaru").value.trim();

  if (!nama || !absen) {
    alert("Nama dan absen wajib diisi!");
    return;
  }

  if (siswaData.some(s => s.absen == absen)) {
    alert("Absen sudah digunakan!");
    return;
  }

  siswaData.push({
    nama: nama.toUpperCase(),
    absen: Number(absen)
  });

  document.getElementById("namaBaru").value = "";
  document.getElementById("absenBaru").value = "";

  renderSiswa();
}

/* ===============================
   LOGOUT
================================ */
function logout() {
  localStorage.clear();
  window.location.href = "login.html";
}
</script>

</script>

</body>
</html>


